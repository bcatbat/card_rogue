System.register("chunks:///_virtual/Debug_rogue.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ZComponent.ts"],(function(e){"use strict";var i,t,l,a,s,n,o,r,h,c,d,u,_;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,l=e.initializerDefineProperty,a=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,o=e._decorator,r=e.Node,h=e.Label,c=e.Toggle,d=e.EditBox,u=e.instantiate},function(e){_=e.ZComponent}],execute:function(){var k,g,b,m,p,f,v,C,$,y,B,N,S,x,R,w,P,A,D,z,E,L,M,F,T,V,I,W,j,O,Z;n._RF.push({},"b3202XT4FRK44DN6Vv2nTUf","Debug_rogue",void 0);var H=o.ccclass,K=o.property,U=(e("Debug_rogue",(k=H("Debug_rogue"),g=K(r),b=K(r),m=K(r),p=K(r),f=K(r),v=K(r),C=K(r),$=K(r),y=K(r),B=K(h),N=K(h),S=K(c),x=K(d),R=K(d),k((A=i((P=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return i=e.call.apply(e,[this].concat(s))||this,l(i,"$nd_cand0",A,a(i)),l(i,"$nd_cand1",D,a(i)),l(i,"$nd_cand2",z,a(i)),l(i,"$nd_cand3",E,a(i)),l(i,"$nd_bagA",L,a(i)),l(i,"$nd_bagB",M,a(i)),l(i,"$nd_bagC",F,a(i)),l(i,"$nd_poolContent",T,a(i)),l(i,"$nd_prefabRecord",V,a(i)),l(i,"$label_chooseNum",I,a(i)),l(i,"$label_path",W,a(i)),l(i,"$toggle_pathEvoBreak",j,a(i)),l(i,"$EditBox_maxBagRateModifier",O,a(i)),l(i,"$EditBox_maxSkillNum",Z,a(i)),i._skillPool=[],i._skillBag=new U,i._skillCandidateScoreDict={},i._bagRateModifier=-1,i._chooseNum=0,i._pathRecord=[],i}t(i,e);var n=i.prototype;return n.start=function(){this.bagRateModifier=0,this.reset()},n.genDefaultSkills=function(){for(var e=[],i=+this.$EditBox_maxSkillNum.string,t=1;t<=i;t++)e.push({skillName:"a"+t,level:0,maxLevel:6,type:"a",evoWith:"b"+t,evoInto:"c"+t,evoFrom:[]}),e.push({skillName:"b"+t,level:0,maxLevel:6,type:"b",evoWith:"a"+t,evoInto:"c"+t,evoFrom:[]}),e.push({skillName:"c"+t,level:0,maxLevel:1,evoInto:"",evoWith:"",type:"c",evoFrom:["a"+t,"b"+t]});return e},n.reset=function(){this.chooseNum=0,this._skillPool=this.genDefaultSkills(),this._skillBag=new U,this.$label_path.string="",this._pathRecord=[""],this.change()},n.change=function(){this.recalcCandidates(),this.refreshCandidateView(),this.refreshPoolView(),this.refreshBagView()},n.recalcCandidates=function(e){var i=this;void 0===e&&(e=3),this._skillPool.forEach((function(e){if(e.maxLevel<=e.level)i._skillCandidateScoreDict[e.skillName]=0;else{if("c"==e.type&&!i._skillBag.hasSkill(e.skillName)){var t=!0;return e.evoFrom.forEach((function(e){if(i._skillBag.hasSkill(e)){var l=i._skillBag.getSkill(e);"a"==l.type&&l.level<l.maxLevel&&(t=!1)}else t=!1})),void(i._skillCandidateScoreDict[e.skillName]=t?10:0)}var l=1,a=i._skillBag.hasSkill(e.skillName);(!i._skillBag.isTypeAFull||"a"!=e.type||a)&&(!i._skillBag.isTypeBFull||"b"!=e.type||a)?(i._skillBag.isSkillRelated(e)&&(l+=i.bagRateModifier),i._skillCandidateScoreDict[e.skillName]=Math.random()*l):i._skillCandidateScoreDict[e.skillName]=0}})),this._skillPool.sort((function(e,t){return i._skillCandidateScoreDict[t.skillName]-i._skillCandidateScoreDict[e.skillName]})),this.$nd_cand0.active=e>0&&this._skillCandidateScoreDict[this._skillPool[0].skillName]>0,this.$nd_cand1.active=e>1&&this._skillCandidateScoreDict[this._skillPool[1].skillName]>0,this.$nd_cand2.active=e>2&&this._skillCandidateScoreDict[this._skillPool[2].skillName]>0,this.$nd_cand3.active=e>3&&this._skillCandidateScoreDict[this._skillPool[3].skillName]>0},n.choose=function(e){this.chooseNum++;var i=this._skillPool[e];this._skillBag.addSkill(i),this._pathRecord.push(this.chooseNum+"-"+i.skillName+"-"+i.level+"/"+i.maxLevel),this.chooseNum%2==0&&this._pathRecord.push("\n"),this.$label_path.string=this._pathRecord.join("\t\t"),this.change()},n.refreshPoolView=function(){var e=this;this.$nd_poolContent.destroyAllChildren(),this.$nd_poolContent.removeAllChildren(),this._skillPool.forEach((function(i){var t=u(e.$nd_prefabRecord);t.active=!0;var l=e._skillCandidateScoreDict[i.skillName].toFixed(2);t.getComponent(h).string=i.skillName+"\t"+i.level+"/"+i.maxLevel+"\t"+l,t.setParent(e.$nd_poolContent)}))},n.refreshBagView=function(){var e=this;this.$nd_bagA.destroyAllChildren(),this.$nd_bagB.destroyAllChildren(),this.$nd_bagC.destroyAllChildren(),this.$nd_bagA.removeAllChildren(),this.$nd_bagB.removeAllChildren(),this.$nd_bagC.removeAllChildren(),this._skillBag.listA.forEach((function(i){var t=u(e.$nd_prefabRecord);t.active=!0,t.getComponent(h).string=i.skillName+"\t"+i.level+"/"+i.maxLevel,t.setParent(e.$nd_bagA)})),this._skillBag.listB.forEach((function(i){var t=u(e.$nd_prefabRecord);t.active=!0,t.getComponent(h).string=i.skillName+"\t"+i.level+"/"+i.maxLevel,t.setParent(e.$nd_bagB)})),this._skillBag.listC.forEach((function(i){var t=u(e.$nd_prefabRecord);t.active=!0,t.getComponent(h).string=i.skillName+"\t"+i.level+"/"+i.maxLevel,t.setParent(e.$nd_bagC)}))},n.refreshCandidateView=function(){this.setCandCell(this.$nd_cand0,this._skillPool[0]),this.setCandCell(this.$nd_cand1,this._skillPool[1]),this.setCandCell(this.$nd_cand2,this._skillPool[2]),this.setCandCell(this.$nd_cand3,this._skillPool[3])},n.setCandCell=function(e,i){e.getChildByName("$label_name").getComponent(h).string=i.skillName,e.getChildByName("$label_level").getComponent(h).string="Lv."+i.level},n.randomChoosePath=function(){var e=this;if(this._skillCandidateScoreDict[this._skillPool[0].skillName]>0){var i="c"==this._skillPool[0].type;if(this.choose(0),this.$toggle_pathEvoBreak.isChecked&&i)return;this.scheduleOnce((function(){e.randomChoosePath()}))}},n.onEditBoxReturnEvent=function(e,i){switch(i){case"skill_num":this.reset();break;case"bag_rate_mod":this.bagRateModifier=+this.$EditBox_maxBagRateModifier.string,this.reset()}},n.onButtonClickEvent=function(e,i){switch(i){case"cand0":this.choose(0);break;case"cand1":this.choose(1);break;case"cand2":this.choose(2);break;case"cand3":this.choose(3);break;case"reset":this.reset();break;case"change":this.change();break;case"random":this.randomChoosePath()}},s(i,[{key:"bagRateModifier",get:function(){return this._bagRateModifier},set:function(e){e!=this._bagRateModifier&&(this._bagRateModifier=e)}},{key:"chooseNum",get:function(){return this._chooseNum},set:function(e){this._chooseNum=e,this.$label_chooseNum.string="总选择次数："+e}}]),i}(_)).prototype,"$nd_cand0",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(P.prototype,"$nd_cand1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(P.prototype,"$nd_cand2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(P.prototype,"$nd_cand3",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(P.prototype,"$nd_bagA",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(P.prototype,"$nd_bagB",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(P.prototype,"$nd_bagC",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(P.prototype,"$nd_poolContent",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(P.prototype,"$nd_prefabRecord",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(P.prototype,"$label_chooseNum",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=i(P.prototype,"$label_path",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(P.prototype,"$toggle_pathEvoBreak",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(P.prototype,"$EditBox_maxBagRateModifier",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(P.prototype,"$EditBox_maxSkillNum",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w)),function(){function e(){this.listA=[],this.listB=[],this.listC=[],this.dict={},this.sizeA=7,this.sizeB=7}var i=e.prototype;return i.getSkill=function(e){return this.dict[e]},i.hasSkill=function(e){return!!this.dict[e]},i.isSkillRelated=function(e){return this.hasSkill(e.skillName)||this.hasSkill(e.evoWith)},i.removeSkill=function(e){var i;switch(e.type){case"a":i=this.listA;break;case"b":i=this.listB;break;case"c":i=this.listC;break;default:i=[]}var t=i.indexOf(e);t>=0&&i.splice(t,1),delete this.dict[e.skillName]},i.addSkill=function(e){if(this.hasSkill(e.skillName)){var i=this.getSkill(e.skillName);i.level=Math.min(i.maxLevel,i.level+1)}else{switch(e.type){case"a":this.listA.push(e);break;case"b":this.listB.push(e);break;case"c":this.listC.push(e)}this.dict[e.skillName]=e,e.level=1}},s(e,[{key:"isTypeAFull",get:function(){return this.listA.length>=this.sizeA}},{key:"isTypeBFull",get:function(){return this.listB.length>=this.sizeB}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/IButtonClick.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"dd9dfFLqRlByL82Z1WZQIJY","IButtonClick",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Debug_rogue.ts","./IButtonClick.ts","./ZComponent.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ZComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,c=t.Component}],execute:function(){var r;e._RF.push({},"6515dc4QPdAA5mEtlF0i0JV","ZComponent",void 0);var s=o.ccclass;t("ZComponent",s(r=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(c))||r);e._RF.pop()}}}));
